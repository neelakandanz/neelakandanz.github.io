<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Custom Watch Face Tool</title>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Primary color palette */
            --primary: #4F46E5;
            --primary-light: #818CF8;
            --primary-dark: #3730A3;
            
            /* Neutral colors */
            --background: #F9FAFB;
            --card-bg: #FFFFFF;
            --text-primary: #111827;
            --text-secondary: #6B7280;
            --text-muted: #9CA3AF;
            --border-color: #E5E7EB;
            
            /* Accent colors */
            --success: #10B981;
            --warning: #F59E0B;
            --danger: #EF4444;
            --info: #3B82F6;
            
            /* Shadows */
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-md: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --shadow-lg: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            
            /* Spacing */
            --spacing-1: 0.25rem;
            --spacing-2: 0.5rem;
            --spacing-3: 0.75rem;
            --spacing-4: 1rem;
            --spacing-5: 1.25rem;
            --spacing-6: 1.5rem;
            --spacing-8: 2rem;
            --spacing-12: 3rem;
            
            /* Border radius */
            --radius-sm: 0.25rem;
            --radius: 0.5rem;
            --radius-md: 0.75rem;
            --radius-lg: 1rem;
            --radius-full: 9999px;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
            background-color: var(--background);
            color: var(--text-primary);
            line-height: 1.6;
            padding: var(--spacing-8);
            min-height: 100vh;
        }
        
        h1, h2, h3, h4, h5, h6 {
            font-weight: 600;
            line-height: 1.3;
            color: var(--text-primary);
        }
        
        h1 {
            font-size: 2rem;
            margin-bottom: var(--spacing-6);
            text-align: center;
        }
        
        h2 {
            font-size: 1.25rem;
            margin-bottom: var(--spacing-4);
            position: relative;
            padding-bottom: var(--spacing-2);
            font-weight: 600;
        }
        
        h2::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 40px;
            height: 3px;
            background-color: var(--primary);
            border-radius: var(--radius-full);
        }
        
        p {
            margin-bottom: var(--spacing-3);
            color: var(--text-secondary);
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr;
            gap: var(--spacing-8);
        }
        
        @media (min-width: 768px) {
            .container {
                grid-template-columns: minmax(400px, 1fr) 350px;
            }
        }
        
        .card {
            background-color: var(--card-bg);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow);
            padding: var(--spacing-6);
            height: fit-content;
        }
        
        .watch-preview {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .clock-container {
            position: relative;
            margin: var(--spacing-8) 0;
            width: 100%;
            display: flex;
            justify-content: center;
        }
        
        .clock {
            position: relative;
            border-radius: 50%;
            box-shadow: var(--shadow-lg);
            transition: all 0.3s ease;
        }
        
        .customization-panel {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-6);
        }
        
        .option-group {
            border-bottom: 1px solid var(--border-color);
            padding-bottom: var(--spacing-6);
        }
        
        .option-group:last-child {
            border-bottom: none;
            padding-bottom: 0;
        }
        
        .form-control {
            margin-bottom: var(--spacing-4);
        }
        
        label {
            display: block;
            margin-bottom: var(--spacing-2);
            font-weight: 500;
            color: var(--text-primary);
        }
        
        .toggle-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: var(--spacing-4);
        }
        
        .toggle-label {
            font-weight: 500;
            color: var(--text-primary);
        }
        
        .toggle {
            position: relative;
            width: 50px;
            height: 26px;
        }
        
        .toggle input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--border-color);
            transition: .4s;
            border-radius: 34px;
        }
        
        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .toggle-slider {
            background-color: var(--primary);
        }
        
        input:focus + .toggle-slider {
            box-shadow: 0 0 1px var(--primary);
        }
        
        input:checked + .toggle-slider:before {
            transform: translateX(24px);
        }
        
        input[type="range"] {
            -webkit-appearance: none;
            width: 100%;
            height: 6px;
            border-radius: var(--radius-full);
            background: var(--border-color);
            outline: none;
            margin: var(--spacing-2) 0 var(--spacing-4);
        }
        
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: var(--primary);
            cursor: pointer;
            box-shadow: var(--shadow-sm);
            transition: background 0.2s, transform 0.2s;
        }
        
        input[type="range"]::-webkit-slider-thumb:hover {
            background: var(--primary-dark);
            transform: scale(1.1);
        }
        
        input[type="range"]::-moz-range-thumb {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: var(--primary);
            cursor: pointer;
            box-shadow: var(--shadow-sm);
            transition: background 0.2s, transform 0.2s;
            border: none;
        }
        
        input[type="range"]::-moz-range-thumb:hover {
            background: var(--primary-dark);
            transform: scale(1.1);
        }
        
        .slider-value {
            display: inline-block;
            width: 60px;
            text-align: right;
            color: var(--text-secondary);
            font-weight: 500;
        }
        
        input[type="text"],
        input[type="file"],
        select {
            width: 100%;
            padding: var(--spacing-3);
            border: 1px solid var(--border-color);
            border-radius: var(--radius);
            background-color: white;
            font-family: inherit;
            font-size: 1rem;
            color: var(--text-primary);
            transition: border-color 0.2s;
        }
        
        input[type="text"]:focus,
        select:focus {
            outline: none;
            border-color: var(--primary-light);
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
        }
        
        input[type="color"] {
            -webkit-appearance: none;
            width: 40px;
            height: 40px;
            border: none;
            border-radius: var(--radius);
            cursor: pointer;
            padding: 0;
        }
        
        input[type="color"]::-webkit-color-swatch-wrapper {
            padding: 0;
        }
        
        input[type="color"]::-webkit-color-swatch {
            border: none;
            border-radius: var(--radius);
        }
        
        .color-picker-group {
            display: flex;
            align-items: center;
            gap: var(--spacing-4);
            margin-bottom: var(--spacing-4);
        }
        
        .color-picker-group label {
            margin-bottom: 0;
            flex: 1;
        }
        
        .custom-number-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: var(--spacing-3);
            margin-bottom: var(--spacing-4);
        }
        
        .custom-number-item {
            display: flex;
            align-items: center;
        }
        
        .position-label {
            width: 30px;
            font-weight: 600;
            color: var(--text-secondary);
        }
        
        .custom-number-input {
            width: 60px;
            text-align: center;
            padding: var(--spacing-2);
        }
        
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: var(--spacing-3) var(--spacing-6);
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: var(--radius);
            font-weight: 500;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s;
            text-decoration: none;
            box-shadow: var(--shadow-sm);
        }
        
        .btn:hover {
            background-color: var(--primary-dark);
            transform: translateY(-1px);
            box-shadow: var(--shadow);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .btn-secondary {
            background-color: var(--info);
        }
        
        .btn-secondary:hover {
            background-color: #2563eb;
        }
        
        .btn-success {
            background-color: var(--success);
        }
        
        .btn-success:hover {
            background-color: #059669;
        }
        
        .btn-block {
            width: 100%;
            margin-top: var(--spacing-4);
        }
        
        .btn-return {
            display: inline-flex;
            align-items: center;
            margin-bottom: var(--spacing-6);
            color: var(--primary);
            font-weight: 500;
            text-decoration: none;
            transition: color 0.2s;
        }
        
        .btn-return:hover {
            color: var(--primary-dark);
        }
        
        .btn-return svg {
            margin-right: var(--spacing-2);
        }
        
        .hand-options {
            display: grid;
            grid-template-columns: 1fr;
            gap: var(--spacing-3);
        }
        
        .note {
            font-size: 0.875rem;
            color: var(--text-muted);
            margin-top: var(--spacing-2);
        }
        
        .number {
            position: absolute;
            font-weight: 500;
            text-align: center;
            transition: all 0.3s ease;
        }
        
        .hand {
            position: absolute;
            transform-origin: bottom center;
            transition: transform 0.3s;
        }
        
        .hour-hand {
            width: 4px;
            border-radius: var(--radius-full);
            z-index: 2;
        }
        
        .minute-hand {
            width: 3px;
            border-radius: var(--radius-full);
            z-index: 1;
        }
        
        .second-hand {
            width: 2px;
            border-radius: var(--radius-full);
            z-index: 3;
        }
        
        .center-dot {
            position: absolute;
            border-radius: 50%;
            z-index: 4;
            transition: all 0.3s ease;
        }
        
        @media (max-width: 768px) {
            body {
                padding: var(--spacing-4);
            }
            
            .container {
                gap: var(--spacing-6);
            }
            
            .custom-number-grid {
                grid-template-columns: 1fr;
            }
        }
        
        /* Animations */
        @keyframes pulse {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.02);
            }
            100% {
                transform: scale(1);
            }
        }
        
        .animate-pulse {
            animation: pulse 2s infinite;
        }
        
        /* Brand Logo Styles */
        .brand-element {
            transition: all 0.3s ease;
        }
    </style>
</head>
<body>
    <a href="../index.html" class="btn-return">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>
        Back to Portfolio
    </a>
    
    <h1>Custom Watch Face Tool</h1>
    
    <div class="container">
        <div class="card watch-preview">
            <h2>Preview</h2>
            <div class="clock-container">
                <div id="clock" class="clock"></div>
            </div>
            <button id="save-button" class="btn btn-success btn-block">Save Watch Face</button>
        </div>
        
        <div class="card customization-panel">
            <div class="option-group">
                <h2>Size Options</h2>
                <div class="form-control">
                    <label for="size">Watch Size</label>
                    <div class="range-container">
                        <input type="range" id="size" min="150" max="500" value="300" oninput="updateWatchFace()">
                        <span id="size-value" class="slider-value">300px</span>
                    </div>
                </div>
            </div>
            
            <div class="option-group">
                <h2>Brand Options</h2>
                <div class="toggle-container">
                    <span class="toggle-label">Show Branding</span>
                    <label class="toggle">
                        <input type="checkbox" id="show-brand" checked onchange="updateWatchFace()">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                
                <div class="toggle-container">
                    <span class="toggle-label">Show Logo</span>
                    <label class="toggle">
                        <input type="checkbox" id="show-logo" checked onchange="toggleLogoOptions()">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                
                <!-- Logo Options -->
                <div id="logo-brand-options">
                    <div class="form-control">
                        <label for="brand-logo">Upload Logo</label>
                        <input type="file" id="brand-logo" accept="image/*" onchange="handleLogoUpload(event)">
                    </div>
                    
                    <div class="form-control">
                        <label for="logo-size">Logo Size</label>
                        <div class="range-container">
                            <input type="range" id="logo-size" min="5" max="40" value="20" oninput="updateWatchFace()">
                            <span id="logo-size-value" class="slider-value">20%</span>
                        </div>
                    </div>
                    
                    <div class="form-control">
                        <label for="logo-position">Logo Position</label>
                        <div class="range-container">
                            <input type="range" id="logo-position" min="10" max="45" value="20" oninput="updateWatchFace()">
                            <span id="logo-position-value" class="slider-value">20%</span>
                        </div>
                    </div>
                    
                    <button id="default-logo-button" class="btn btn-secondary">Reset to Default Logo</button>
                </div>
                
                <!-- Text Brand Options -->
                <div class="form-control">
                    <label for="brand-name">Brand Name</label>
                    <input type="text" id="brand-name" value="GLORIOSA" maxlength="12" oninput="updateWatchFace()">
                </div>
                
                <div class="form-control">
                    <label for="brand-size">Brand Size</label>
                    <div class="range-container">
                        <input type="range" id="brand-size" min="8" max="24" value="14" oninput="updateWatchFace()">
                        <span id="brand-size-value" class="slider-value">14px</span>
                    </div>
                </div>
                
                <div class="form-control">
                    <label for="brand-position">Brand Position</label>
                    <div class="range-container">
                        <input type="range" id="brand-position" min="50" max="75" value="65" oninput="updateWatchFace()">
                        <span id="brand-position-value" class="slider-value">65%</span>
                    </div>
                </div>
                
                <div class="color-picker-group">
                    <label for="brand-color">Brand Text Color</label>
                    <input type="color" id="brand-color" value="#000000" oninput="updateWatchFace()">
                </div>
            </div>
            
            <div class="option-group">
                <h2>Background Options</h2>
                <div class="color-picker-group">
                    <label for="bg-color">Background Color</label>
                    <input type="color" id="bg-color" value="#ffffff" oninput="updateWatchFace()">
                </div>
                
                <div class="toggle-container">
                    <span class="toggle-label">Use Background Image</span>
                    <label class="toggle">
                        <input type="checkbox" id="use-image" onchange="toggleImageOptions()">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                
                <div id="image-options" style="display: none;">
                    <div class="form-control">
                        <label for="bg-image">Upload Image</label>
                        <input type="file" id="bg-image" accept="image/*" onchange="handleImageUpload(event)">
                    </div>
                </div>
            </div>
            
            <div class="option-group">
                <h2>Number Options</h2>
                <div class="toggle-container">
                    <span class="toggle-label">Show Numbers</span>
                    <label class="toggle">
                        <input type="checkbox" id="show-numbers" checked onchange="updateWatchFace()">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                
                <div class="form-control">
                    <label for="number-style">Number Style</label>
                    <select id="number-style" onchange="updateWatchFace()">
                        <option value="normal">Normal (1-12)</option>
                        <option value="roman">Roman (I-XII)</option>
                        <option value="tamil">Tamil (௧-௧௨)</option>
                        <option value="dots">Dots</option>
                        <option value="custom">Custom Text</option>
                    </select>
                </div>
                
                <div class="color-picker-group">
                    <label for="number-color">Number Color</label>
                    <input type="color" id="number-color" value="#000000" oninput="updateWatchFace()">
                </div>
                
                <div class="form-control">
                    <label for="number-size">Number Size</label>
                    <div class="range-container">
                        <input type="range" id="number-size" min="10" max="36" value="20" oninput="updateWatchFace()">
                        <span id="number-size-value" class="slider-value">20px</span>
                    </div>
                </div>
            </div>
            
            <div class="option-group">
                <h2>Custom Text</h2>
                <p>Enter text to replace specific numbers</p>
                
                <div class="custom-number-grid">
                    <div class="custom-number-item">
                        <span class="position-label">1:</span>
                        <input type="text" id="custom-1" class="custom-number-input" maxlength="3">
                    </div>
                    <div class="custom-number-item">
                        <span class="position-label">7:</span>
                        <input type="text" id="custom-7" class="custom-number-input" maxlength="3">
                    </div>
                    <div class="custom-number-item">
                        <span class="position-label">2:</span>
                        <input type="text" id="custom-2" class="custom-number-input" maxlength="3">
                    </div>
                    <div class="custom-number-item">
                        <span class="position-label">8:</span>
                        <input type="text" id="custom-8" class="custom-number-input" maxlength="3">
                    </div>
                    <div class="custom-number-item">
                        <span class="position-label">3:</span>
                        <input type="text" id="custom-3" class="custom-number-input" maxlength="3">
                    </div>
                    <div class="custom-number-item">
                        <span class="position-label">9:</span>
                        <input type="text" id="custom-9" class="custom-number-input" maxlength="3">
                    </div>
                    <div class="custom-number-item">
                        <span class="position-label">4:</span>
                        <input type="text" id="custom-4" class="custom-number-input" maxlength="3">
                    </div>
                    <div class="custom-number-item">
                        <span class="position-label">10:</span>
                        <input type="text" id="custom-10" class="custom-number-input" maxlength="3">
                    </div>
                    <div class="custom-number-item">
                        <span class="position-label">5:</span>
                        <input type="text" id="custom-5" class="custom-number-input" maxlength="3">
                    </div>
                    <div class="custom-number-item">
                        <span class="position-label">11:</span>
                        <input type="text" id="custom-11" class="custom-number-input" maxlength="3">
                    </div>
                    <div class="custom-number-item">
                        <span class="position-label">6:</span>
                        <input type="text" id="custom-6" class="custom-number-input" maxlength="3">
                    </div>
                    <div class="custom-number-item">
                        <span class="position-label">12:</span>
                        <input type="text" id="custom-12" class="custom-number-input" maxlength="3">
                    </div>
                </div>
                <button id="apply-custom-numbers" class="btn btn-secondary">Apply Custom Text</button>
                <p class="note">Note: Select "Custom Text" in Number Style above for custom text to display</p>
            </div>
            
            <div class="option-group">
                <h2>Hand Options</h2>
                
                <div class="hand-options">
                    <!-- Hour Hand Options -->
                    <div class="toggle-container">
                        <label for="show-hour-hand" class="toggle-label">Show Hour Hand</label>
                        <div class="controls-group" style="display: flex; gap: 8px; align-items: center;">
                            <label class="toggle">
                                <input type="checkbox" id="show-hour-hand" checked onchange="updateClockHands()">
                                <span class="toggle-slider"></span>
                            </label>
                            <input type="color" id="hour-hand-color" value="#000000" onchange="updateClockHands()">
                        </div>
                    </div>
                    
                    <!-- Minute Hand Options -->
                    <div class="toggle-container">
                        <label for="show-minute-hand" class="toggle-label">Show Minute Hand</label>
                        <div class="controls-group" style="display: flex; gap: 8px; align-items: center;">
                            <label class="toggle">
                                <input type="checkbox" id="show-minute-hand" checked onchange="updateClockHands()">
                                <span class="toggle-slider"></span>
                            </label>
                            <input type="color" id="minute-hand-color" value="#000000" onchange="updateClockHands()">
                        </div>
                    </div>
                    
                    <!-- Second Hand Options -->
                    <div class="toggle-container">
                        <label for="show-second-hand" class="toggle-label">Show Second Hand</label>
                        <div class="controls-group" style="display: flex; gap: 8px; align-items: center;">
                            <label class="toggle">
                                <input type="checkbox" id="show-second-hand" checked onchange="updateClockHands()">
                                <span class="toggle-slider"></span>
                            </label>
                            <input type="color" id="second-hand-color" value="#FF0000" onchange="updateClockHands()">
                        </div>
                    </div>
                    
                    <!-- Center Dot Options -->
                    <div class="toggle-container">
                        <label for="show-center-dot" class="toggle-label">Show Center Dot</label>
                        <div class="controls-group" style="display: flex; gap: 8px; align-items: center;">
                            <label class="toggle">
                                <input type="checkbox" id="show-center-dot" checked onchange="updateClockHands()">
                                <span class="toggle-slider"></span>
                            </label>
                            <input type="color" id="center-dot-color" value="#FF0000" onchange="updateClockHands()">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const clock = document.getElementById('clock');
        let clockSize = 300;
        let backgroundImage = null;
        let logoImage = null;
        const defaultLogoUrl = "https://raw.githubusercontent.com/neelakandanz/neelakandanz.github.io/refs/heads/main/default_brand_logo.png";
        let defaultLogoLoaded = false;
        
        // Initialize the clock
        function initClock() {
            // Load the default logo first
            loadDefaultLogoAndInitialize();
            
            // Set up default logo button
            document.getElementById('default-logo-button').addEventListener('click', useDefaultLogo);
            
            // Set up clock hands update timer
            setInterval(updateClockHands, 1000);
        }
        
        // Load default logo and initialize watch face
        function loadDefaultLogoAndInitialize() {
            const img = new Image();
            img.crossOrigin = "Anonymous"; // Enable cross-origin loading
            
            img.onload = function() {
                // Set the logo image to the default
                logoImage = img.src;
                defaultLogoLoaded = true;
                
                // Now that logo is loaded, update the watch face
                updateWatchFace();
            };
            
            img.onerror = function() {
                console.error("Could not load the default logo.");
                defaultLogoLoaded = false;
                // Still update the watch face even if logo fails to load
                updateWatchFace();
            };
            
            img.src = defaultLogoUrl;
        }
        
        // Use the default logo
        function useDefaultLogo() {
            const img = new Image();
            img.crossOrigin = "Anonymous"; // Enable cross-origin loading
            
            img.onload = function() {
                logoImage = img.src;
                // Make sure the logo toggle is enabled if it wasn't already
                if (!document.getElementById('show-logo').checked) {
                    document.getElementById('show-logo').checked = true;
                    document.getElementById('logo-brand-options').style.display = 'block';
                }
                updateWatchFace();
            };
            
            img.onerror = function() {
                alert("Could not load the default logo. Please try uploading your own image.");
            };
            
            img.src = defaultLogoUrl;
        }
        
        // Toggle logo options visibility
        function toggleLogoOptions() {
            const showLogo = document.getElementById('show-logo').checked;
            const logoOptions = document.getElementById('logo-brand-options');
            logoOptions.style.display = showLogo ? 'block' : 'none';
            updateWatchFace();
        }
        
        // Handle logo image upload
        function handleLogoUpload(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    logoImage = e.target.result;
                    updateWatchFace();
                }
                reader.readAsDataURL(file);
            }
        }
        
        // Update the watch face based on customization options
        function updateWatchFace() {
            // Update size
            clockSize = document.getElementById('size').value;
            document.getElementById('size-value').textContent = clockSize + 'px';
            
            clock.style.width = clockSize + 'px';
            clock.style.height = clockSize + 'px';
            
            // Update background
            if (document.getElementById('use-image').checked && backgroundImage) {
                clock.style.backgroundColor = 'transparent';
                clock.style.backgroundImage = `url(${backgroundImage})`;
                clock.style.backgroundSize = 'cover';
                clock.style.backgroundPosition = 'center';
            } else {
                const bgColor = document.getElementById('bg-color').value;
                clock.style.backgroundColor = bgColor;
                clock.style.backgroundImage = 'none';
            }
            
            // Number size update
            const numberSize = document.getElementById('number-size').value;
            document.getElementById('number-size-value').textContent = numberSize + 'px';
            
            // Brand size update
            const brandSize = document.getElementById('brand-size').value;
            document.getElementById('brand-size-value').textContent = brandSize + 'px';
            
            // Brand position update
            const brandPosition = document.getElementById('brand-position').value;
            document.getElementById('brand-position-value').textContent = brandPosition + '%';
            
            // Logo size update
            const logoSize = document.getElementById('logo-size').value;
            document.getElementById('logo-size-value').textContent = logoSize + '%';
            
            // Logo position update
            const logoPosition = document.getElementById('logo-position').value;
            document.getElementById('logo-position-value').textContent = logoPosition + '%';
            
            // Clear previous elements
            const oldNumbers = clock.querySelectorAll('.number');
            oldNumbers.forEach(num => num.remove());
            
            const oldBrandElements = clock.querySelectorAll('.brand-element');
            oldBrandElements.forEach(element => element.remove());
            
            // Add numbers if enabled
            if (document.getElementById('show-numbers').checked) {
                addClockNumbers();
            }
            
            // Add brand elements if enabled
            if (document.getElementById('show-brand').checked) {
                addBrandElements();
            }
            
            // Ensure hands are updated
            updateClockHands();
            
            // Ensure center dot is positioned correctly
            updateCenterDot();
        }
        
        // Add brand elements (text and/or logo) to the clock
        function addBrandElements() {
            // Add logo if enabled
            if (document.getElementById('show-logo').checked && logoImage) {
                const logoSize = document.getElementById('logo-size').value;
                const logoPosition = document.getElementById('logo-position').value;
                
                const logo = document.createElement('img');
                logo.className = 'brand-element logo';
                logo.src = logoImage;
                logo.style.position = 'absolute';
                logo.style.maxWidth = (clockSize * (logoSize / 100)) + 'px';
                logo.style.maxHeight = (clockSize * 0.15) + 'px';
                logo.style.left = '50%';
                logo.style.transform = 'translateX(-50%)';
                logo.style.top = (clockSize * (logoPosition / 100)) + 'px';
                
                clock.appendChild(logo);
            }
            
            // Always add brand name text (unless branding is turned off completely)
            const brandName = document.getElementById('brand-name').value.trim();
            if (brandName) {
                const brandColor = document.getElementById('brand-color').value;
                const brandSize = document.getElementById('brand-size').value + 'px';
                const brandPosition = document.getElementById('brand-position').value;
                
                const brand = document.createElement('div');
                brand.className = 'brand-element text';
                brand.textContent = brandName;
                brand.style.position = 'absolute';
                brand.style.color = brandColor;
                brand.style.fontSize = brandSize;
                brand.style.fontWeight = '500';
                brand.style.textAlign = 'center';
                brand.style.width = '100%';
                brand.style.left = '0';
                brand.style.top = (clockSize * (brandPosition / 100)) + 'px';
                
                clock.appendChild(brand);
            }
        }
        
        // Add clock numbers based on selected style
        function addClockNumbers() {
            const numberStyle = document.getElementById('number-style').value;
            const numberColor = document.getElementById('number-color').value;
            const numberSize = document.getElementById('number-size').value + 'px';
            const radius = clockSize / 2 - 30;
            
            const romanNumerals = ['I', 'II', 'III', 'IV', 'V', 'VI', 'VII', 'VIII', 'IX', 'X', 'XI', 'XII'];
            const tamilNumerals = ['௧', '௨', '௩', '௪', '௫', '௬', '௭', '௮', '௯', '௧௦', '௧௧', '௧௨'];
            
            for (let i = 1; i <= 12; i++) {
                const number = document.createElement('div');
                number.className = 'number';
                
                // Position the number
                const angle = (i * 30 - 90) * (Math.PI / 180);
                const x = radius * Math.cos(angle);
                const y = radius * Math.sin(angle);
                
                number.style.left = (clockSize / 2 + x - 15) + 'px';
                number.style.top = (clockSize / 2 + y - 15) + 'px';
                number.style.color = numberColor;
                number.style.fontSize = numberSize;
                number.style.width = '30px';
                number.style.height = '30px';
                
                // Set number content based on style
                if (numberStyle === 'custom') {
                    const customText = document.getElementById(`custom-${i}`).value.trim();
                    number.textContent = customText || i.toString();
                } else if (numberStyle === 'roman') {
                    number.textContent = romanNumerals[i - 1];
                } else if (numberStyle === 'tamil') {
                    number.textContent = tamilNumerals[i - 1];
                } else if (numberStyle === 'dots') {
                    number.textContent = '•';
                    number.style.fontSize = (parseInt(numberSize) + 5) + 'px';
                } else {
                    number.textContent = i;
                }
                
                clock.appendChild(number);
            }
        }
        
        // Update clock hands to show current time
        function updateClockHands() {
            // Remove old hands
            const oldHands = clock.querySelectorAll('.hand');
            oldHands.forEach(hand => hand.remove());
            
            const now = new Date();
            const hours = now.getHours() % 12;
            const minutes = now.getMinutes();
            const seconds = now.getSeconds();
            
            // Calculate hand angles
            const hourAngle = (hours * 30) + (minutes * 0.5);
            const minuteAngle = minutes * 6;
            const secondAngle = seconds * 6;
            
            // Get hand colors
            const hourHandColor = document.getElementById('hour-hand-color').value;
            const minuteHandColor = document.getElementById('minute-hand-color').value;
            const secondHandColor = document.getElementById('second-hand-color').value;
            
            // Check if hour hand should be shown
            if (document.getElementById('show-hour-hand').checked) {
                // Create hour hand
                const hourHand = document.createElement('div');
                hourHand.className = 'hand hour-hand';
                hourHand.style.height = (clockSize * 0.2) + 'px';
                hourHand.style.bottom = (clockSize / 2) + 'px';
                hourHand.style.left = (clockSize / 2 - 2) + 'px';
                hourHand.style.backgroundColor = hourHandColor;
                hourHand.style.transform = `rotate(${hourAngle}deg)`;
                clock.appendChild(hourHand);
            }
            
            // Check if minute hand should be shown
            if (document.getElementById('show-minute-hand').checked) {
                // Create minute hand
                const minuteHand = document.createElement('div');
                minuteHand.className = 'hand minute-hand';
                minuteHand.style.height = (clockSize * 0.3) + 'px';
                minuteHand.style.bottom = (clockSize / 2) + 'px';
                minuteHand.style.left = (clockSize / 2 - 1.5) + 'px';
                minuteHand.style.backgroundColor = minuteHandColor;
                minuteHand.style.transform = `rotate(${minuteAngle}deg)`;
                clock.appendChild(minuteHand);
            }
            
            // Check if second hand should be shown
            if (document.getElementById('show-second-hand').checked) {
                // Create second hand
                const secondHand = document.createElement('div');
                secondHand.className = 'hand second-hand';
                secondHand.style.height = (clockSize * 0.35) + 'px';
                secondHand.style.bottom = (clockSize / 2) + 'px';
                secondHand.style.left = (clockSize / 2 - 1) + 'px';
                secondHand.style.backgroundColor = secondHandColor;
                secondHand.style.transform = `rotate(${secondAngle}deg)`;
                clock.appendChild(secondHand);
            }
            
            // Update center dot
            updateCenterDot();
        }
        
        // Update center dot
        function updateCenterDot() {
            // Remove old center dot
            const oldDot = clock.querySelector('.center-dot');
            if (oldDot) oldDot.remove();
            
            // Check if center dot should be shown
            if (document.getElementById('show-center-dot').checked) {
                // Get center dot color
                const centerDotColor = document.getElementById('center-dot-color').value;
                
                // Create new center dot
                const centerDot = document.createElement('div');
                centerDot.className = 'center-dot';
                centerDot.style.width = (clockSize * 0.03) + 'px';
                centerDot.style.height = (clockSize * 0.03) + 'px';
                centerDot.style.left = (clockSize / 2 - (clockSize * 0.015)) + 'px';
                centerDot.style.top = (clockSize / 2 - (clockSize * 0.015)) + 'px';
                centerDot.style.backgroundColor = centerDotColor;
                
                clock.appendChild(centerDot);
            }
        }
        
        // Toggle image options visibility
        function toggleImageOptions() {
            const imageOptions = document.getElementById('image-options');
            imageOptions.style.display = document.getElementById('use-image').checked ? 'block' : 'none';
            updateWatchFace();
        }
        
        // Handle image upload
        function handleImageUpload(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    backgroundImage = e.target.result;
                    updateWatchFace();
                }
                reader.readAsDataURL(file);
            }
        }
        
        // Save watch face as image
        function saveWatchFace() {
            try {
                // Create a canvas element
                const canvas = document.createElement('canvas');
                const context = canvas.getContext('2d');
                
                // Set canvas size to match the clock
                canvas.width = clockSize;
                canvas.height = clockSize;
                
                // Draw white background first (in case of transparency issues)
                context.fillStyle = '#ffffff';
                context.fillRect(0, 0, clockSize, clockSize);
                
                // Draw background circle
                context.beginPath();
                context.arc(clockSize/2, clockSize/2, clockSize/2 - 1, 0, Math.PI * 2);
                context.closePath();
                
                // Fill with background color
                context.fillStyle = document.getElementById('bg-color').value;
                context.fill();
                
                // If using background image, need to handle it differently
                if (document.getElementById('use-image').checked && backgroundImage) {
                    const img = new Image();
                    img.crossOrigin = "Anonymous";
                    img.src = backgroundImage;
                    
                    img.onload = function() {
                        // Create circular clipping path
                        context.save();
                        context.beginPath();
                        context.arc(clockSize/2, clockSize/2, clockSize/2 - 1, 0, Math.PI * 2);
                        context.clip();
                        
                        // Draw the image
                        context.drawImage(img, 0, 0, clockSize, clockSize);
                        context.restore();
                        
                        // Continue with drawing the rest
                        drawClockFace();
                    };
                    
                    img.onerror = function() {
                        console.error("Error loading background image");
                        // Continue anyway, but without the image
                        drawClockFace();
                    };
                } else {
                    // No image, proceed directly
                    drawClockFace();
                }
                
                function drawClockFace() {
                    // Draw border
                    context.beginPath();
                    context.arc(clockSize/2, clockSize/2, clockSize/2 - 1, 0, Math.PI * 2);
                    context.lineWidth = 2;
                    context.strokeStyle = '#000';
                    context.stroke();
                    
                    // Draw numbers if enabled
                    if (document.getElementById('show-numbers').checked) {
                        const numberStyle = document.getElementById('number-style').value;
                        const numberColor = document.getElementById('number-color').value;
                        const numberSize = document.getElementById('number-size').value;
                        const radius = clockSize / 2 - 30;
                        
                        const romanNumerals = ['I', 'II', 'III', 'IV', 'V', 'VI', 'VII', 'VIII', 'IX', 'X', 'XI', 'XII'];
                        const tamilNumerals = ['௧', '௨', '௩', '௪', '௫', '௬', '௭', '௮', '௯', '௧௦', '௧௧', '௧௨'];
                        
                        context.fillStyle = numberColor;
                        context.textAlign = 'center';
                        context.textBaseline = 'middle';
                        
                        for (let i = 1; i <= 12; i++) {
                            const angle = (i * 30 - 90) * (Math.PI / 180);
                            const x = radius * Math.cos(angle) + clockSize/2;
                            const y = radius * Math.sin(angle) + clockSize/2;
                            
                            context.font = `${numberSize}px 'Inter', Arial, sans-serif`;
                            
                            // Set number content based on style
                            if (numberStyle === 'custom') {
                                const customText = document.getElementById(`custom-${i}`).value.trim();
                                context.fillText(customText || i.toString(), x, y);
                            } else if (numberStyle === 'roman') {
                                context.fillText(romanNumerals[i - 1], x, y);
                            } else if (numberStyle === 'tamil') {
                                context.fillText(tamilNumerals[i - 1], x, y);
                            } else if (numberStyle === 'dots') {
                                context.fillText('•', x, y);
                            } else {
                                context.fillText(i.toString(), x, y);
                            }
                        }
                    }
                    
                    // Draw brand elements if enabled
                    if (document.getElementById('show-brand').checked) {
                        // Draw logo if enabled
                        if (document.getElementById('show-logo').checked && logoImage) {
                            const logoSize = document.getElementById('logo-size').value;
                            const logoPosition = document.getElementById('logo-position').value;
                            
                            const logoImg = new Image();
                            logoImg.src = logoImage;
                            
                            // Function to draw logo once it's loaded
                            const drawLogo = function() {
                                // Calculate dimensions while preserving aspect ratio
                                const maxWidth = clockSize * (logoSize / 100);
                                const ratio = logoImg.height / logoImg.width;
                                let logoWidth = maxWidth;
                                let logoHeight = logoWidth * ratio;
                                
                                if (logoHeight > clockSize * 0.15) {
                                    logoHeight = clockSize * 0.15;
                                    logoWidth = logoHeight / ratio;
                                }
                                
                                // Position at specified position from top
                                const logoX = clockSize/2 - logoWidth/2;
                                const logoY = clockSize * (logoPosition / 100);
                                
                                context.drawImage(logoImg, logoX, logoY, logoWidth, logoHeight);
                                
                                // Draw brand text after logo is drawn
                                drawBrandText();
                            };
                            
                            // If logo is already loaded
                            if (logoImg.complete) {
                                drawLogo();
                            } else {
                                // Wait for logo to load
                                logoImg.onload = drawLogo;
                                logoImg.onerror = function() {
                                    console.error("Error loading logo image");
                                    drawBrandText(); // Continue with brand text
                                };
                            }
                        } else {
                            // No logo, just draw brand text
                            drawBrandText();
                        }
                    } else {
                        // No branding, proceed directly to clock hands
                        drawClockHands();
                    }
                    
                    function drawBrandText() {
                        // Draw the text-based brand
                        const brandName = document.getElementById('brand-name').value.trim();
                        if (brandName) {
                            const brandColor = document.getElementById('brand-color').value;
                            const brandSize = document.getElementById('brand-size').value;
                            const brandPosition = document.getElementById('brand-position').value;
                            
                            context.font = `${brandSize}px 'Inter', Arial, sans-serif`;
                            context.fillStyle = brandColor;
                            context.textAlign = 'center';
                            context.textBaseline = 'middle';
                            
                            // Position brand name at specified position
                            context.fillText(brandName, clockSize/2, clockSize * (brandPosition / 100));
                        }
                        
                        // Move on to drawing the clock hands
                        drawClockHands();
                    }
                    
                    function drawClockHands() {
                        // Get current time
                        const now = new Date();
                        const hours = now.getHours() % 12;
                        const minutes = now.getMinutes();
                        const seconds = now.getSeconds();
                        
                        // Calculate hand angles
                        const hourAngle = (hours * 30 + minutes * 0.5) * (Math.PI / 180);
                        const minuteAngle = minutes * 6 * (Math.PI / 180);
                        const secondAngle = seconds * 6 * (Math.PI / 180);
                        
                        const centerX = clockSize / 2;
                        const centerY = clockSize / 2;
                        
                        // Get hand colors
                        const hourHandColor = document.getElementById('hour-hand-color').value;
                        const minuteHandColor = document.getElementById('minute-hand-color').value;
                        const secondHandColor = document.getElementById('second-hand-color').value;
                        const centerDotColor = document.getElementById('center-dot-color').value;
                        
                        // Draw hour hand if enabled
                        if (document.getElementById('show-hour-hand').checked) {
                            const hourHandLength = clockSize * 0.2;
                            context.beginPath();
                            context.lineWidth = 4;
                            context.lineCap = 'round';
                            context.strokeStyle = hourHandColor;
                            context.moveTo(centerX, centerY);
                            context.lineTo(
                                centerX + hourHandLength * Math.cos(hourAngle - Math.PI/2),
                                centerY + hourHandLength * Math.sin(hourAngle - Math.PI/2)
                            );
                            context.stroke();
                        }
                        
                        // Check if minute hand should be shown
                        if (document.getElementById('show-minute-hand').checked) {
                            const minuteHandLength = clockSize * 0.3;
                            context.beginPath();
                            context.lineWidth = 3;
                            context.lineCap = 'round';
                            context.strokeStyle = minuteHandColor;
                            context.moveTo(centerX, centerY);
                            context.lineTo(
                                centerX + minuteHandLength * Math.cos(minuteAngle - Math.PI/2),
                                centerY + minuteHandLength * Math.sin(minuteAngle - Math.PI/2)
                            );
                            context.stroke();
                        }
                        
                        // Check if second hand should be shown
                        if (document.getElementById('show-second-hand').checked) {
                            const secondHandLength = clockSize * 0.35;
                            context.beginPath();
                            context.lineWidth = 2;
                            context.lineCap = 'round';
                            context.strokeStyle = secondHandColor;
                            context.moveTo(centerX, centerY);
                            context.lineTo(
                                centerX + secondHandLength * Math.cos(secondAngle - Math.PI/2),
                                centerY + secondHandLength * Math.sin(secondAngle - Math.PI/2)
                            );
                            context.stroke();
                        }
                        
                        // Draw center dot if enabled
                        if (document.getElementById('show-center-dot').checked) {
                            context.beginPath();
                            context.arc(centerX, centerY, clockSize * 0.015, 0, Math.PI * 2);
                            context.fillStyle = centerDotColor;
                            context.fill();
                        }
                        
                        // Convert canvas to image and trigger download
                        try {
                            // Show a brief animation on the clock to indicate processing
                            clock.classList.add('animate-pulse');
                            
                            const imageURL = canvas.toDataURL('image/png');
                            const downloadLink = document.createElement('a');
                            downloadLink.href = imageURL;
                            downloadLink.download = 'watchface.png';
                            downloadLink.style.display = 'none';
                            document.body.appendChild(downloadLink);
                            
                            setTimeout(() => {
                                downloadLink.click();
                                document.body.removeChild(downloadLink);
                                
                                // Create notification of success
                                const notification = document.createElement('div');
                                notification.style.position = 'fixed';
                                notification.style.bottom = '20px';
                                notification.style.left = '50%';
                                notification.style.transform = 'translateX(-50%)';
                                notification.style.backgroundColor = 'var(--success)';
                                notification.style.color = 'white';
                                notification.style.padding = '12px 24px';
                                notification.style.borderRadius = '6px';
                                notification.style.boxShadow = 'var(--shadow-md)';
                                notification.style.zIndex = '1000';
                                notification.textContent = "Watch face saved successfully!";
                                
                                document.body.appendChild(notification);
                                
                                setTimeout(() => {
                                    notification.style.opacity = '0';
                                    notification.style.transition = 'opacity 0.5s';
                                    
                                    setTimeout(() => {
                                        document.body.removeChild(notification);
                                        clock.classList.remove('animate-pulse');
                                    }, 500);
                                }, 3000);
                            }, 500);
                        } catch (err) {
                            console.error("Error generating or downloading image:", err);
                            alert("There was an error saving the watch face. Please try again.");
                            clock.classList.remove('animate-pulse');
                        }
                    }
                }
            } catch (err) {
                console.error("Error in saveWatchFace function:", err);
                alert("There was an error saving the watch face. Please try again.");
            }
        }
        
        // Initialize when page loads
        window.onload = function() {
            initClock();
            
            // Add save button event listener
            document.getElementById('save-button').addEventListener('click', saveWatchFace);
            
            // Add event listener for Apply Custom Text button
            document.getElementById('apply-custom-numbers').addEventListener('click', function() {
                // Force number style to custom when apply button is clicked
                document.getElementById('number-style').value = 'custom';
                updateWatchFace();
            });
        };
    </script>
</body>
</html>
