<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pallanguzhi 3D - Traditional Tamil Game</title>
    <link rel="stylesheet" href="style.css">

    <!-- Import Map for Three.js to allow bare imports in modules -->
    <script type="importmap">
        {
            "imports": {
                "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
                "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
            }
        }
    </script>
</head>

<body>
    <div id="game-container">
        <!-- Canvas will be injected here by Three.js -->

        <div id="ui-layer">
            <div id="header" class="hud-panel">
                <div class="score-box">
                    <span class="score-label">Player 1</span>
                    <span id="score-p1" class="score-value">0</span>
                </div>
                <h1>Pallanguzhi</h1>
                <div class="score-box">
                    <span class="score-label">Player 2</span>
                    <span id="score-p2" class="score-value">0</span>
                </div>
            </div>

            <div id="turn-indicator">Player 1's Turn</div>

            <!-- Rules Sidebar -->
            <div id="rules-panel" class="hud-panel">
                <h3>How to Play</h3>
                <ol>
                    <li><strong>Start:</strong> Player 1 (Bottom) goes first.</li>
                    <li><strong>Sow:</strong> Click any of your pits with seeds to distribute them one by one
                        counter-clockwise.</li>
                    <li><strong>Chain Rule:</strong> If the last seed lands in a non-empty pit, pick up all seeds from
                        that pit and continue sowing.</li>
                    <li><strong>Capture:</strong> If the last seed lands in an empty pit, you capture the seeds in the
                        <em>next</em> pit!</li>
                    <li><strong>End:</strong> The game ends when a player has no moves. The player with the most seeds
                        wins.</li>
                </ol>
            </div>

            <div id="footer">
                <div class="hud-panel">
                    <button id="reset-btn">New Game</button>
                    <button id="camera-btn">Toggle View</button>
                </div>
                <div class="hud-panel" style="font-size: 0.8rem; opacity: 0.7;">
                    Left Click to Play â€¢ Drag to Rotate
                </div>
            </div>
        </div>

        <div id="modal-overlay">
            <div class="modal-content">
                <h2>Game Over</h2>
                <div id="winner-text">Player 1 Wins!</div>
                <button id="play-again-btn">Play Again</button>
            </div>
        </div>
    </div>

    <!-- Main Game Script -->
    <script type="module" src="./game.js"></script>
</body>

</html>